<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee Machine Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .coffee-machine {
            background: linear-gradient(145deg, #34495e, #2c3e50);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 
                20px 20px 60px #1a252f,
                -20px -20px 60px #3e576b;
            max-width: 500px;
            width: 100%;
        }

        .machine-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .machine-title {
            color: #ecf0f1;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .display-screen {
            background: #000;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 20px;
            border-radius: 10px;
            min-height: 120px;
            margin-bottom: 30px;
            border: 3px solid #34495e;
            box-shadow: inset 0 0 20px rgba(0,255,0,0.1);
            overflow-y: auto;
        }

        .button-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .drink-button {
            background: linear-gradient(145deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                5px 5px 15px #1a252f,
                -5px -5px 15px #3e576b;
        }

        .drink-button:hover {
            transform: translateY(-2px);
            box-shadow: 
                7px 7px 20px #1a252f,
                -7px -7px 20px #3e576b;
        }

        .drink-button:active {
            transform: translateY(0);
            box-shadow: 
                3px 3px 10px #1a252f,
                -3px -3px 10px #3e576b;
        }

        .control-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        .control-btn {
            background: linear-gradient(145deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                3px 3px 10px #1a252f,
                -3px -3px 10px #3e576b;
        }

        .control-btn:hover {
            transform: translateY(-1px);
        }

        .coin-panel {
            background: linear-gradient(145deg, #95a5a6, #7f8c8d);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: inset 5px 5px 10px #6b7a7b, inset -5px -5px 10px #a9b9ba;
        }

        .coin-title {
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .coin-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .coin-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .coin-input {
            width: 60px;
            padding: 8px;
            border: 2px solid #34495e;
            border-radius: 8px;
            font-size: 14px;
            text-align: center;
        }

        .coin-label {
            font-size: 12px;
            color: #2c3e50;
            font-weight: bold;
        }

        .pay-button {
            background: linear-gradient(145deg, #27ae60, #229954);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            box-shadow: 
                5px 5px 15px #1a252f,
                -5px -5px 15px #3e576b;
        }

        .pay-button:hover {
            transform: translateY(-2px);
        }

        .pay-button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .status-lights {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .status-light {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #e74c3c;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        .status-light.green {
            background: #27ae60;
            box-shadow: 0 0 10px rgba(39, 174, 96, 0.5);
        }

        .hidden {
            display: none;
        }

        .resource-display {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="coffee-machine">
        <div class="machine-header">
            <h1 class="machine-title">‚òï COFFEE MACHINE ‚òï</h1>
        </div>

        <div class="display-screen" id="display">
            Welcome to Coffee Machine!<br>
            Select your drink or check report.<br>
            <span class="resource-display">Water: 300ml | Milk: 200ml | Coffee: 100g | Money: $0.00</span>
        </div>

        <div class="button-panel">
            <button class="drink-button" onclick="selectDrink('espresso')">
                ‚òï ESPRESSO<br>
                <small>$1.50</small>
            </button>
            <button class="drink-button" onclick="selectDrink('latte')">
                ü•õ LATTE<br>
                <small>$2.50</small>
            </button>
            <button class="drink-button" onclick="selectDrink('cappuccino')">
                ‚òï CAPPUCCINO<br>
                <small>$3.00</small>
            </button>
            <button class="drink-button" onclick="selectDrink('report')">
                üìä REPORT<br>
                <small>Status</small>
            </button>
        </div>

        <div class="control-buttons">
            <button class="control-btn" onclick="cancelOrder()">‚ùå CANCEL</button>
            <button class="control-btn" onclick="togglePower()">üîå OFF</button>
        </div>

        <div class="coin-panel hidden" id="coinPanel">
            <div class="coin-title">üí∞ INSERT COINS</div>
            <div class="coin-inputs">
                <div class="coin-input-group">
                    <span class="coin-label">Quarters:</span>
                    <input type="number" class="coin-input" id="quarters" min="0" value="0">
                </div>
                <div class="coin-input-group">
                    <span class="coin-label">Dimes:</span>
                    <input type="number" class="coin-input" id="dimes" min="0" value="0">
                </div>
                <div class="coin-input-group">
                    <span class="coin-label">Nickels:</span>
                    <input type="number" class="coin-input" id="nickels" min="0" value="0">
                </div>
                <div class="coin-input-group">
                    <span class="coin-label">Pennies:</span>
                    <input type="number" class="coin-input" id="pennies" min="0" value="0">
                </div>
            </div>
            <button class="pay-button" onclick="processPayment()">üí≥ PAY</button>
        </div>

        <div class="status-lights">
            <div class="status-light green" id="powerLight"></div>
            <div class="status-light" id="errorLight"></div>
            <div class="status-light" id="readyLight"></div>
        </div>
    </div>

    <script>
        // Coffee Machine Data
        const MENU = {
            "espresso": {
                "ingredients": {
                    "water": 50,
                    "coffee": 18,
                },
                "cost": 1.5,
            },
            "latte": {
                "ingredients": {
                    "water": 200,
                    "milk": 150,
                    "coffee": 24,
                },
                "cost": 2.5,
            },
            "cappuccino": {
                "ingredients": {
                    "water": 250,
                    "milk": 100,
                    "coffee": 24,
                },
                "cost": 3.0,
            }
        };

        let profit = 0;
        let resources = {
            "water": 300,
            "milk": 200,
            "coffee": 100,
        };

        let isOn = true;
        let selectedDrink = null;

        // DOM Elements
        const display = document.getElementById('display');
        const coinPanel = document.getElementById('coinPanel');
        const powerLight = document.getElementById('powerLight');
        const errorLight = document.getElementById('errorLight');
        const readyLight = document.getElementById('readyLight');

        function updateDisplay(message) {
            display.innerHTML = message + '<br><span class="resource-display">Water: ' + resources.water + 'ml | Milk: ' + resources.milk + 'ml | Coffee: ' + resources.coffee + 'g | Money: $' + profit.toFixed(2) + '</span>';
        }

        function addToDisplay(message) {
            const current = display.innerHTML;
            const resourceDisplay = current.match(/<span class="resource-display">.*<\/span>/);
            const mainContent = current.replace(/<span class="resource-display">.*<\/span>/, '');
            display.innerHTML = mainContent + message + '<br><span class="resource-display">Water: ' + resources.water + 'ml | Milk: ' + resources.milk + 'ml | Coffee: ' + resources.coffee + 'g | Money: $' + profit.toFixed(2) + '</span>';
        }

        function isResourceSufficient(orderIngredients) {
            for (let item in orderIngredients) {
                if (orderIngredients[item] > resources[item]) {
                    updateDisplay(`‚ùå Sorry there is not enough ${item}.`);
                    flashErrorLight();
                    return false;
                }
            }
            return true;
        }

        function processCoins() {
            const quarters = parseInt(document.getElementById('quarters').value) || 0;
            const dimes = parseInt(document.getElementById('dimes').value) || 0;
            const nickels = parseInt(document.getElementById('nickels').value) || 0;
            const pennies = parseInt(document.getElementById('pennies').value) || 0;

            const total = quarters * 0.25 + dimes * 0.1 + nickels * 0.05 + pennies * 0.01;
            return total;
        }

        function isTransactionSuccessful(moneyReceived, drinkCost) {
            if (moneyReceived >= drinkCost) {
                const change = Math.round((moneyReceived - drinkCost) * 100) / 100;
                if (change > 0) {
                    addToDisplay(`üí∞ Here is $${change.toFixed(2)} in change.`);
                }
                profit += drinkCost;
                return true;
            } else {
                addToDisplay("‚ùå Sorry that's not enough money. Money refunded.");
                flashErrorLight();
                return false;
            }
        }

        function makeCoffee(drinkName, orderIngredients) {
            for (let item in orderIngredients) {
                resources[item] -= orderIngredients[item];
            }
            addToDisplay(`‚òï Here's your ${drinkName}! Enjoy!`);
            flashReadyLight();
        }

        function selectDrink(drink) {
            if (!isOn) {
                updateDisplay("‚ùå Machine is OFF. Please turn it on.");
                return;
            }

            if (drink === 'report') {
                updateDisplay(`üìä MACHINE REPORT:<br>Water: ${resources.water}ml<br>Milk: ${resources.milk}ml<br>Coffee: ${resources.coffee}g<br>Money: $${profit.toFixed(2)}`);
                return;
            }

            selectedDrink = drink;
            const drinkData = MENU[drink];
            
            if (isResourceSufficient(drinkData.ingredients)) {
                updateDisplay(`‚òï You selected ${drink.toUpperCase()}<br>Cost: $${drinkData.cost.toFixed(2)}<br>üí∞ Please insert coins below:`);
                coinPanel.classList.remove('hidden');
                resetCoinInputs();
            } else {
                selectedDrink = null;
            }
        }

        function processPayment() {
            if (!selectedDrink) return;

            const payment = processCoins();
            const drinkCost = MENU[selectedDrink].cost;
            
            addToDisplay(`üí≥ Payment received: $${payment.toFixed(2)}`);
            
            if (isTransactionSuccessful(payment, drinkCost)) {
                makeCoffee(selectedDrink, MENU[selectedDrink].ingredients);
            }
            
            coinPanel.classList.add('hidden');
            selectedDrink = null;
            resetCoinInputs();
        }

        function cancelOrder() {
            selectedDrink = null;
            coinPanel.classList.add('hidden');
            resetCoinInputs();
            updateDisplay("‚ùå Order cancelled.<br>Select your drink or check report.");
        }

        function togglePower() {
            isOn = !isOn;
            if (isOn) {
                powerLight.classList.add('green');
                updateDisplay("‚úÖ Machine turned ON.<br>Select your drink or check report.");
            } else {
                powerLight.classList.remove('green');
                updateDisplay("‚ùå Machine turned OFF.<br>Press power button to turn on.");
                coinPanel.classList.add('hidden');
                selectedDrink = null;
            }
        }

        function resetCoinInputs() {
            document.getElementById('quarters').value = '0';
            document.getElementById('dimes').value = '0';
            document.getElementById('nickels').value = '0';
            document.getElementById('pennies').value = '0';
        }

        function flashErrorLight() {
            errorLight.classList.add('green');
            setTimeout(() => errorLight.classList.remove('green'), 1000);
        }

        function flashReadyLight() {
            readyLight.classList.add('green');
            setTimeout(() => readyLight.classList.remove('green'), 2000);
        }

        // Initialize
        updateDisplay("Welcome to Coffee Machine!<br>Select your drink or check report.");
    </script>
</body>
</html>    